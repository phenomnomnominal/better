## API Report File for "@betterer/betterer"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { BettererConstraintResult } from '@betterer/constraints';
import type { BettererError } from '@betterer/errors';
import type { BettererLogs } from '@betterer/logger';

// @public
export const betterer: {
    (options?: BettererOptions): Promise<BettererSuiteSummary>;
    merge: typeof merge;
    results: typeof results;
    runner: typeof runner;
    watch: typeof watch;
};

// @public
export type BettererAPI = typeof betterer;

// @public
export interface BettererConfig extends BettererConfigFS, BettererConfigReporter, BettererConfigContext, BettererConfigWatcher {
    versionControlPath: string;
}

// @public
export interface BettererConfigContext {
    ci: boolean;
    excludes: BettererConfigExcludes;
    filters: BettererConfigFilters;
    includes: BettererConfigIncludes;
    precommit: boolean;
    strict: boolean;
    update: boolean;
    workers: number;
}

// @public
export type BettererConfigExcludes = ReadonlyArray<RegExp>;

// @public
export type BettererConfigFilters = ReadonlyArray<RegExp>;

// @public
export interface BettererConfigFS {
    cache: boolean;
    cachePath: string;
    configPaths: BettererConfigPaths;
    cwd: string;
    resultsPath: string;
}

// @public
export type BettererConfigIgnores = ReadonlyArray<string>;

// @public
export type BettererConfigIncludes = ReadonlyArray<string>;

// @public
export type BettererConfigPaths = ReadonlyArray<string>;

// @public
export interface BettererConfigReporter {
    logo: boolean;
    reporter: BettererReporter;
}

// @public
export interface BettererConfigWatcher {
    ignores: BettererConfigIgnores;
    watch: boolean;
}

// @public
export interface BettererContext {
    readonly config: BettererConfig;
    options(optionsOverride: BettererOptionsOverride): Promise<void>;
    stop(): Promise<BettererSuiteSummary>;
}

// @public
export interface BettererContextSummary {
    readonly config: BettererConfig;
    lastSuite: BettererSuiteSummary;
    suites: BettererSuiteSummaries;
}

// @public
export type BettererDelta = {
    readonly baseline: number;
    readonly diff: number;
    readonly result: number;
} | {
    readonly baseline: null;
    readonly diff: 0;
    readonly result: number;
};

// @public
export type BettererDeserialise<DeserialisedType, SerialisedType> = (serialised: SerialisedType, resultsPath: string) => DeserialisedType;

// @public
export interface BettererDiff<DiffType = null> {
    diff: DiffType;
    logs: BettererLogs;
}

// @public
export type BettererDiffer<DeserialisedType, DiffType> = (expected: DeserialisedType, result: DeserialisedType) => BettererDiff<DiffType>;

// @public
export interface BettererFile extends BettererFileBase {
    addIssue(start: number, end: number, message: string, hash?: string): void;
    addIssue(line: number, col: number, length: number, message: string, hash?: string): void;
    addIssue(startLine: number, startCol: number, endLine: number, endCol: number, message: string, hash?: string): void;
}

// @public
export interface BettererFileBase {
    readonly absolutePath: string;
    readonly hash: string;
    readonly issues: BettererFileIssues;
    readonly key: BettererFileTestResultKey;
}

// @public
export interface BettererFileDiff {
    existing?: BettererFileIssuesSerialised;
    fixed?: BettererFileIssuesSerialised;
    new?: BettererFileIssuesSerialised;
}

// @public
export type BettererFileGlobs = ReadonlyArray<string | ReadonlyArray<string>>;

// @public
export interface BettererFileIssue {
    readonly column: number;
    readonly hash: string;
    readonly length: number;
    readonly line: number;
    readonly message: string;
}

// @public
export type BettererFileIssues = ReadonlyArray<BettererFileIssue>;

// @public
export type BettererFileIssueSerialised = [line: number, column: number, length: number, message: string, hash: string];

// @public
export type BettererFileIssuesSerialised = ReadonlyArray<BettererFileIssueSerialised>;

// @public
export type BettererFilePath = string;

// @public
export type BettererFilePaths = ReadonlyArray<BettererFilePath>;

// @public
export type BettererFilePatterns = ReadonlyArray<RegExp | ReadonlyArray<RegExp>>;

// @public
export interface BettererFileResolver {
    readonly baseDirectory: string;
    included(filePaths: BettererFilePaths): BettererFilePaths;
    relative(to: string): string;
    resolve(...pathSegments: Array<string>): string;
    validate(filePaths: BettererFilePaths): Promise<BettererFilePaths>;
}

// @public
export type BettererFilesDiff = Record<string, BettererFileDiff>;

// @public
export class BettererFileTest extends BettererResolverTest<BettererFileTestResult, BettererFileTestResultSerialised, BettererFilesDiff> {
    constructor(fileTest: BettererFileTestFunction);
}

// @public
export type BettererFileTestDiff = BettererDiff<BettererFilesDiff>;

// @public
export type BettererFileTestFunction = (filePaths: BettererFilePaths, fileTestResult: BettererFileTestResult, resolver: BettererFileResolver) => MaybeAsync<void>;

// @public
export interface BettererFileTestResult {
    addFile(absolutePath: string, fileText: string): BettererFile;
    getIssues(absolutePath?: string): BettererFileIssues;
}

// @public
export type BettererFileTestResultKey = `${string}:${string}`;

// @public
export type BettererFileTestResultSerialised = Record<BettererFileTestResultKey, BettererFileIssuesSerialised>;

// @public
export interface BettererFileTestResultSummary {
    details: BettererFileTestResultSummaryDetails;
    isFileTest: true;
    name: string;
}

// @public
export type BettererFileTestResultSummaryDetails = Record<string, BettererFileIssues>;

// @public
export type BettererOptions = BettererOptionsContext & BettererOptionsFS & BettererOptionsMode & BettererOptionsReporter;

// @public
export type BettererOptionsContext = BettererOptionsMode & {
    excludes?: BettererOptionsExcludes;
    filters?: BettererOptionsFilters;
    includes?: BettererOptionsIncludes;
    workers?: number | boolean;
};

// @public
export interface BettererOptionsContextOverride {
    filters?: BettererOptionsFilters;
}

// @public
export type BettererOptionsExcludes = Array<string | RegExp> | string | RegExp;

// @public
export type BettererOptionsFilters = Array<string | RegExp> | string | RegExp;

// @public
export interface BettererOptionsFS {
    cache?: boolean;
    cachePath?: string;
    configPaths?: BettererOptionsPaths;
    cwd?: string;
    resultsPath?: string;
}

// @public
export type BettererOptionsIgnores = Array<string>;

// @public
export type BettererOptionsIncludes = Array<string> | string;

// @public
export interface BettererOptionsMerge {
    contents?: Array<string>;
    cwd?: string;
    resultsPath?: string;
}

// @public
export type BettererOptionsMode = BettererOptionsModeCI | BettererOptionsModeDefault | BettererOptionsModePrecommit | BettererOptionsModeStrict | BettererOptionsModeUpdate;

// @public
export interface BettererOptionsModeCI {
    // (undocumented)
    ci?: true;
    // (undocumented)
    precommit?: false;
    // (undocumented)
    strict?: true;
    // (undocumented)
    update?: false;
}

// @public
export interface BettererOptionsModeDefault {
    // (undocumented)
    ci?: false;
    // (undocumented)
    precommit?: false;
    // (undocumented)
    strict?: false;
    // (undocumented)
    update?: false;
}

// @public
export interface BettererOptionsModePrecommit {
    // (undocumented)
    ci?: false;
    // (undocumented)
    precommit?: true;
    // (undocumented)
    strict?: true;
    // (undocumented)
    update?: false;
}

// @public
export interface BettererOptionsModeStrict {
    // (undocumented)
    ci?: false;
    // (undocumented)
    precommit?: false;
    // (undocumented)
    strict?: true;
    // (undocumented)
    update?: false;
}

// @public
export interface BettererOptionsModeUpdate {
    // (undocumented)
    ci?: false;
    // (undocumented)
    precommit?: false;
    // (undocumented)
    strict?: false;
    // (undocumented)
    update?: true;
}

// @public
export interface BettererOptionsModeWatch {
    // (undocumented)
    ci?: false;
    // (undocumented)
    precommit?: false;
    // (undocumented)
    strict?: boolean;
    // (undocumented)
    update?: false;
}

// @public
export interface BettererOptionsOverride extends BettererOptionsContextOverride, BettererOptionsReporterOverride, BettererOptionsWatcherOverride {
}

// @public
export type BettererOptionsPaths = Array<string> | string;

// @public
export interface BettererOptionsReporter {
    logo?: boolean;
    reporters?: BettererOptionsReporters;
    silent?: boolean;
}

// @public
export interface BettererOptionsReporterOverride {
    reporters?: BettererOptionsReporters;
}

// @public
export type BettererOptionsReporters = Array<string | BettererReporter>;

// @public
export type BettererOptionsResults = Pick<BettererOptionsFS, 'cwd' | 'configPaths' | 'resultsPath'> & Pick<BettererOptionsContext, 'excludes' | 'filters' | 'includes'>;

// @public
export type BettererOptionsRunner = BettererOptions;

// @public
export type BettererOptionsWatch = BettererOptionsContext & BettererOptionsFS & BettererOptionsModeWatch & BettererOptionsReporter & BettererOptionsWatcher;

// @public
export interface BettererOptionsWatcher {
    ignores?: BettererOptionsIgnores;
    watch?: true;
}

// @public
export interface BettererOptionsWatcherOverride {
    ignores?: BettererOptionsIgnores;
}

// @public
export type BettererPrinter<SerialisedType> = (serialised: SerialisedType) => MaybeAsync<string>;

// @public
export type BettererProgress<DeserialisedType> = (baseline: DeserialisedType | null, result: DeserialisedType | null) => MaybeAsync<BettererDelta | null>;

// @public
export interface BettererReporter {
    configError?(config: unknown, error: BettererError): Promise<void> | void;
    contextEnd?(contextSummary: BettererContextSummary): Promise<void> | void;
    contextError?(context: BettererContext, error: BettererError): Promise<void> | void;
    contextStart?(context: BettererContext, lifecycle: Promise<BettererContextSummary>): Promise<void> | void;
    runEnd?(runSummary: BettererRunSummary): Promise<void> | void;
    runError?(run: BettererRun, error: BettererError): Promise<void> | void;
    runStart?(run: BettererRun, lifecycle: Promise<BettererRunSummary>): Promise<void> | void;
    suiteEnd?(suiteSummary: BettererSuiteSummary): Promise<void> | void;
    suiteError?(suite: BettererSuite, error: BettererError): Promise<void> | void;
    suiteStart?(suite: BettererSuite, lifecycle: Promise<BettererSuiteSummary>): Promise<void> | void;
}

// @public
export class BettererResolverTest<DeserialisedType = unknown, SerialisedType = DeserialisedType, DiffType = null> extends BettererTest<DeserialisedType, SerialisedType, DiffType> {
    constructor(options: BettererTestOptions<DeserialisedType, SerialisedType, DiffType>);
    exclude(...excludePatterns: BettererFilePatterns): this;
    include(...includePatterns: BettererFileGlobs): this;
    get resolver(): BettererFileResolver;
}

// @public
export interface BettererResult {
    value: unknown;
}

// @public
export interface BettererResultsSummary {
    resultSummaries: BettererResultSummaries;
}

// @public
export type BettererResultSummaries = ReadonlyArray<BettererResultSummary>;

// @public
export type BettererResultSummary = BettererTestResultSummary | BettererFileTestResultSummary;

// @public
export interface BettererRun {
    readonly baseline: BettererResult | null;
    readonly expected: BettererResult | null;
    readonly filePaths: BettererFilePaths | null;
    readonly isNew: boolean;
    readonly isSkipped: boolean;
    readonly name: string;
}

// @public
export interface BettererRunner {
    options(optionsOverride: BettererOptionsOverride): Promise<void>;
    queue(filePaths?: string | BettererFilePaths): Promise<void>;
    stop(): Promise<BettererSuiteSummary>;
    stop(force: true): Promise<BettererSuiteSummary | null>;
}

// @public
export type BettererRuns = ReadonlyArray<BettererRun>;

// @public
export type BettererRunSummaries = Array<BettererRunSummary>;

// @public
export interface BettererRunSummary extends BettererRun {
    readonly delta: BettererDelta | null;
    readonly diff: BettererDiff | null;
    readonly error: Error | null;
    readonly isBetter: boolean;
    readonly isComplete: boolean;
    readonly isExpired: boolean;
    readonly isFailed: boolean;
    readonly isSame: boolean;
    readonly isUpdated: boolean;
    readonly isWorse: boolean;
    // (undocumented)
    readonly printed: string | null;
    readonly result: BettererResult | null;
    readonly timestamp: number;
}

// @public
export type BettererSerialise<DeserialisedType, SerialisedType> = (result: DeserialisedType, resultsPath: string) => SerialisedType;

// @public
export interface BettererSerialiser<DeserialisedType, SerialisedType = DeserialisedType> {
    deserialise: BettererDeserialise<DeserialisedType, SerialisedType>;
    serialise: BettererSerialise<DeserialisedType, SerialisedType>;
}

// @public
export interface BettererSuite {
    readonly filePaths: BettererFilePaths;
    readonly runs: BettererRuns;
}

// @public
export type BettererSuiteSummaries = ReadonlyArray<BettererSuiteSummary>;

// @public
export interface BettererSuiteSummary extends BettererSuite {
    readonly better: BettererRunSummaries;
    readonly changed: BettererTestNames;
    readonly completed: BettererRunSummaries;
    readonly expired: BettererRunSummaries;
    readonly failed: BettererRunSummaries;
    readonly new: BettererRunSummaries;
    readonly ran: BettererRunSummaries;
    readonly runSummaries: BettererRunSummaries;
    readonly same: BettererRunSummaries;
    readonly skipped: BettererRunSummaries;
    readonly updated: BettererRunSummaries;
    readonly worse: BettererRunSummaries;
}

// @public
export class BettererTest<DeserialisedType = unknown, SerialisedType = DeserialisedType, DiffType = null> {
    constructor(options: BettererTestOptions<DeserialisedType, SerialisedType, DiffType>);
    get config(): BettererTestConfig<DeserialisedType, SerialisedType, DiffType>;
    constraint(constraintOverride: BettererTestConstraint<DeserialisedType>): this;
    deadline(deadlineOverride: BettererTestDeadline): this;
    goal(goalOverride: BettererTestGoal<DeserialisedType>): this;
    get isOnly(): boolean;
    get isSkipped(): boolean;
    only(): this;
    skip(): this;
}

// @public
export interface BettererTestConfig<DeserialisedType = unknown, SerialisedType = DeserialisedType, DiffType = null> {
    readonly constraint: BettererTestConstraint<DeserialisedType>;
    readonly deadline: number;
    readonly differ: BettererDiffer<DeserialisedType, DiffType>;
    readonly goal: BettererTestGoal<DeserialisedType>;
    readonly printer: BettererPrinter<SerialisedType>;
    readonly progress: BettererProgress<DeserialisedType>;
    readonly serialiser: BettererSerialiser<DeserialisedType, SerialisedType>;
    readonly test: BettererTestFunction<DeserialisedType>;
}

// @public
export type BettererTestConstraint<DeserialisedType> = (result: DeserialisedType, expected: DeserialisedType) => MaybeAsync<BettererConstraintResult>;

// @public
export type BettererTestDeadline = Date | string;

// @public
export type BettererTestFunction<DeserialisedType> = (run: BettererRun) => MaybeAsync<DeserialisedType>;

// @public
export type BettererTestGoal<DeserialisedType> = (result: DeserialisedType) => MaybeAsync<boolean>;

// @public
export type BettererTestNames = ReadonlyArray<string>;

// @public
export interface BettererTestOptions<DeserialisedType, SerialisedType, DiffType> {
    constraint: BettererTestConstraint<DeserialisedType>;
    deadline?: BettererTestDeadline;
    differ?: BettererDiffer<DeserialisedType, DiffType>;
    goal: DeserialisedType | BettererTestGoal<DeserialisedType>;
    printer?: BettererPrinter<SerialisedType>;
    progress?: BettererProgress<DeserialisedType>;
    serialiser?: BettererSerialiser<DeserialisedType, SerialisedType>;
    test: BettererTestFunction<DeserialisedType>;
}

// @public
export interface BettererTestResultSummary {
    details: BettererTestResultSummaryDetails;
    isFileTest: false;
    name: string;
}

// @public
export type BettererTestResultSummaryDetails = string;

// @public
export type MaybeAsync<T> = T | Promise<T>;

// @public
export function merge(options?: BettererOptionsMerge): Promise<void>;

// @public
export function results(options?: BettererOptionsResults): Promise<BettererResultsSummary>;

// @public
export function runner(options?: BettererOptionsRunner): Promise<BettererRunner>;

// @public
export function watch(options?: BettererOptionsWatch): Promise<BettererRunner>;

```
